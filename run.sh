#!/bin/bash

kernprof -lv ./run_prover.py --output_dir outputs/01.train.py/debug/dtst_nm=20221203.first_exp__arg-RT__frml-cmpl__dist-20__transl-nrrw__tree-3__dataset_size-30000__dpth-RT.G_MP/dtst_1_nm=None/bs_cnfg_nm=FLNLcorpus.20220827.base/chckpnt_nm=t5-base/ckpt_lrt=None/ckpt_mdl_nm=None/gnrtn_nm_bms=10/gnrtn_tp_k=10/lrnng_rt=0.0001/mx_stps=300/mdl_nm_or_pth=t5-base/nm_trn_epchs=None/prf_smplng=stepwise/smpl_ngtv_prf=True/scrng_allwd_addtnl_prf_stps=5/scrng_smlrty_thrshld=False/sd=0/sht=debug.tiny/wrmp_stps=0 --logging_dir outputs/01.train.py/debug/dtst_nm=20221203.first_exp__arg-RT__frml-cmpl__dist-20__transl-nrrw__tree-3__dataset_size-30000__dpth-RT.G_MP/dtst_1_nm=None/bs_cnfg_nm=FLNLcorpus.20220827.base/chckpnt_nm=t5-base/ckpt_lrt=None/ckpt_mdl_nm=None/gnrtn_nm_bms=10/gnrtn_tp_k=10/lrnng_rt=0.0001/mx_stps=300/mdl_nm_or_pth=t5-base/nm_trn_epchs=None/prf_smplng=stepwise/smpl_ngtv_prf=True/scrng_allwd_addtnl_prf_stps=5/scrng_smlrty_thrshld=False/sd=0/sht=debug.tiny/wrmp_stps=0/tensorboard_log --seed 0 --max_grad_norm 0.5 --max_steps 300 --gradient_accumulation_steps 32 --max_eval_samples 10 --proof_sampling stepwise --learning_rate 0.0001 --warmup_steps 0 --model_name_or_path t5-base --fp16 True --source_prefix "Let's think step-by-step the following problem" --generation_num_beams 10 --generation_top_k 10 --generation_max_proof_steps 20 --max_source_length 1500 --max_target_length 100 --scoring_similarity_threshold False --logging_strategy steps --logging_steps 50 --overwrite_output_dir True --log_generation True --sample_negative_proof True --per_device_train_batch_size 2 --per_device_eval_batch_size 1 --dataloader_num_workers 0     --log_examples True --evaluation_strategy steps --save_strategy steps  --train_file outputs/00.fix_FLD_schema.py/2023-05-15/20221203.first_exp__arg-RT__frml-cmpl__dist-20__transl-nrrw__tree-3__dataset_size-30000__dpth-RT.G_MP/train.jsonl --validation_file outputs/00.fix_FLD_schema.py/2023-05-15/20221203.first_exp__arg-RT__frml-cmpl__dist-20__transl-nrrw__tree-3__dataset_size-30000__dpth-RT.G_MP/test.jsonl --test_file outputs/00.fix_FLD_schema.py/2023-05-15/20221203.first_exp__arg-RT__frml-cmpl__dist-20__transl-nrrw__tree-3__dataset_size-30000__dpth-RT.G_MP/test.jsonl --tokenizer_padding longest --max_train_samples 10 --max_predict_samples 10  --eval_steps 300 --file_type json --predict_with_generate True --remove_unused_columns False --do_train True --do_eval True --do_predict True   --save_steps 300
